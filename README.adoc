= JUDO CLI

== Project Overview

This project is a command-line interface (CLI) tool named `judo`, written in Go. It is designed to manage the lifecycle of JUDO applications. The tool utilizes the Cobra library for its command structure and interacts with several external tools and services:

*   *Docker:* Manages Docker containers for services like PostgreSQL and Keycloak.
*   *Maven:* Used for building the application. The tool can execute Maven commands with various flags.
*   *Karaf:* The application appears to run in an Apache Karaf container, which the CLI can start, stop, and configure.

The CLI reads its configuration from `judo.properties` files, with the ability to use different environments via a `--env` or `-e` flag.

== Managing the Application

Once the `judo` executable is built, you can use it to manage your JUDO application. Here are some of the key commands:

=== Build the application

To build the application, run:

[source,bash]
----
./judo build
----

This command executes a Maven build (`mvnd clean install`). It supports various flags to customize the build process, such as `--build-parallel` (`-p`) for parallel builds and `--version` (`-v`) to specify a version number.

=== Start the application

To start the application, run:

[source,bash]
----
./judo start
----

This command starts the application. It can start a Docker Compose environment or a local environment with Karaf, PostgreSQL, and Keycloak, depending on the configuration.

=== Stop the application

To stop the running application and associated services, run:

[source,bash]
----
./judo stop
----

=== Clean the environment

To stop and remove Docker containers, networks, and volumes associated with the application, run:

[source,bash]
----
./judo clean
----

=== Update dependencies

To update the dependency versions in the JUDO project, run:

[source,bash]
----
./judo update
----

== Building the CLI

To build the `judo` executable, navigate to the project root directory and run the following command:

[source,bash]
----
go build -o judo ./cmd/judo
----

This will create an executable named `judo` in the current directory.

== Examples

[source,bash]
----
judo prune -f
----
Clear untracked data in application/frontend if opening modeling project freezes in designer.

[source,bash]
----
judo build -a
----
Build app module only for backend. Useful for updating custom operations for running backend.

[source,bash]
----
judo build -f -q
----
Build model and fronted only in quick mode. Useful when frontend changes needs to be checked.

[source,bash]
----
judo build -F -KA
----
Build model and backend without frontend. Useful when custom operations need to be implemented.

[source,bash]
----
judo prune build start
----
Super fresh application build and start.

[source,bash]
----
judo build clean start
----
Stop postgresql docker container then build and run application (including keycloak) with clean db.

[source,bash]
----
judo build start -K
----
Stop postgresql docker container then build and restart application.

[source,bash]
----
judo build -M -F clean start
----
Stop postgresql docker container then rebuild app and start application with clean db.

[source,bash]
----
judo build -M -F start -K
----
Rebuild app and restart application.

[source,bash]
----
judo build -ma "-rf :${app_name}-application-karaf-offline"
----
Continue build from module.

[source,bash]
----
judo start -o "runtime=compose,compose_env=compose-postgresql-https'"
----
Run application in docker compose using the compose-postgresql-https's docker-compose.yaml

[source,bash]
----
judo env compose-dev build start
----
Build and run application with compose-dev env. (have to be described in compose-dev.properties)
