<!-- Material Design Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">

<div class="install-tabs">
  <div class="tab-buttons">
    <button class="tab-button active" data-tab="macos">
      <span class="tab-icon mdi mdi-apple"></span>
      macOS
    </button>
    <button class="tab-button" data-tab="linux">
      <span class="tab-icon mdi mdi-penguin"></span>
      Linux
    </button>
    <button class="tab-button" data-tab="windows">
      <span class="tab-icon mdi mdi-microsoft-windows"></span>
      Windows
    </button>
  </div>
  
  <div class="tab-content">
    <div class="tab-panel active" id="macos">
      <div class="command-box">
        <div class="command-header">
          <span class="command-title">Homebrew</span>
          <button class="copy-btn" data-copy="brew install judo-cli">
            <span class="copy-icon mdi mdi-content-copy"></span>
            Copy
          </button>
        </div>
        <code class="command-text">brew install judo-cli</code>
      </div>
      
      <div class="command-box">
        <div class="command-header">
          <span class="command-title">cURL</span>
          <button class="copy-btn" data-copy="curl -fsSL https://get.judo.codes/install.sh | bash">
            <span class="copy-icon mdi mdi-content-copy"></span>
            Copy
          </button>
        </div>
        <code class="command-text">curl -fsSL https://get.judo.codes/install.sh | bash</code>
      </div>
    </div>
    
    <div class="tab-panel" id="linux">
      <div class="command-box">
        <div class="command-header">
          <span class="command-title">cURL</span>
          <button class="copy-btn" data-copy="curl -fsSL https://get.judo.codes/install.sh | bash">
            <span class="copy-icon mdi mdi-content-copy"></span>
            Copy
          </button>
        </div>
        <code class="command-text">curl -fsSL https://get.judo.codes/install.sh | bash</code>
      </div>
    </div>
    
    <div class="tab-panel" id="windows">
      <div class="command-box">
        <div class="command-header">
          <span class="command-title">PowerShell</span>
          <button class="copy-btn" data-copy="iwr -useb https://get.judo.codes/install.ps1 | iex">
            <span class="copy-icon mdi mdi-content-copy"></span>
            Copy
          </button>
        </div>
        <code class="command-text">iwr -useb https://get.judo.codes/install.ps1 | iex</code>
      </div>
    </div>
  </div>
</div>

<script>
// OS Detection and Auto-selection
(function() {
  const userAgent = navigator.userAgent.toLowerCase();
  let detectedOS = 'macos'; // default
  
  if (userAgent.indexOf('win') !== -1) {
    detectedOS = 'windows';
  } else if (userAgent.indexOf('linux') !== -1) {
    detectedOS = 'linux';
  } else if (userAgent.indexOf('mac') !== -1) {
    detectedOS = 'macos';
  }
  
  // Tab switching functionality
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabPanels = document.querySelectorAll('.tab-panel');
  
  function switchTab(targetTab) {
    // Remove active class from all buttons and panels
    tabButtons.forEach(btn => btn.classList.remove('active'));
    tabPanels.forEach(panel => panel.classList.remove('active'));
    
    // Add active class to selected button and panel
    document.querySelector(`[data-tab="${targetTab}"]`).classList.add('active');
    document.getElementById(targetTab).classList.add('active');
  }
  
  // Set detected OS as active
  switchTab(detectedOS);
  
  // Add click event listeners
  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      const targetTab = button.getAttribute('data-tab');
      switchTab(targetTab);
    });
  });
  
  // Copy functionality
  const copyButtons = document.querySelectorAll('.copy-btn');
  copyButtons.forEach(button => {
    button.addEventListener('click', async () => {
      const textToCopy = button.getAttribute('data-copy');
      
      try {
        await navigator.clipboard.writeText(textToCopy);
        
        // Visual feedback
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="copy-icon">✅</span>Copied!';
        button.classList.add('copied');
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.classList.remove('copied');
        }, 2000);
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = textToCopy;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        // Visual feedback
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="copy-icon">✅</span>Copied!';
        button.classList.add('copied');
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.classList.remove('copied');
        }, 2000);
      }
    });
  });
})();
</script>